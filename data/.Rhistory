summarise(., depu = n_distinct(deputy_name)) %>%
arrange(., desc(depu)) %>%
top_n(., 20, depu) %>%
unique(.$political_party)
maiores_partidos = group_by(reembolsos, political_party) %>%
summarise(., depu = n_distinct(deputy_name)) %>%
arrange(., desc(depu)) %>%
top_n(., 20, depu)
maiores_partidos
parties
maiores_partidos = group_by(reembolsos, political_party) %>%
summarise(., depu = n_distinct(deputy_name)) %>%
arrange(., desc(depu)) %>%
top_n(., 14, depu)
mutate(reembolsos, bigger_parties = ifelse(political_party %in% maiores_partidos$political_party, political_party, "Other"))
reembolsos$bigger_parties = ifelse(political_party %in% maiores_partidos$political_party, political_party, "Other")
reembolsos$bigger_parties = ifelse(reembolsos$political_party %in% maiores_partidos$political_party, reembolsos$political_party, "Other")
View(reembolsos)
parties = unique(reembolsos$political_party) #PARTIDO
parties
# TESTE
reembolsos = read.csv("deputados_agrup.csv")
reembolsos$political_party = gsub("S.PART.", "SEM PARTIDO", reembolsos$political_party, fixed = T) %>%
gsub("SEM PARTIDO ASSOCIADO", "SEM PARTIDO", ., fixed = T)
parties = unique(reembolsos$political_party) #PARTIDO
parties
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
length(parties)
length(parties)
parties = unique(reembolsos$political_party) #PARTIDO
length(parties)
length(party_colors)
party_colors = c('#F2F3F4', '#AED6F1', '#F5B7B1', '#3498DB', '#F2F3F4', '#F2F3F4', '#F1C40F', '#F2F3F4', '#F2F3F4', '#5499C7', '#F2F3F4',
'#7FB3D5', '#F2F3F4', '#F2F3F4', '#F2F3F4', '#F9E79F', '#7DCEA0', '#F2F3F4', '#2E86C1', '#34495E', '#F2F3F4', '#E74C3C',
'#1C2833', '#F2F3F4', '#196F3D', '#F39C12', '#F2F3F4', '#F2F3F4', '#F2F3F4', '#F2F3F4', '#F2F3F4', '#F2F3F4')
length(party_colors)
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
parties
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Curso/R/Aula 6 - Shiny - parte II/Exemplos de aplicação no shiny/shinydashboard')
View(reembolsos)
View(estados)
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
?actionButton()
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
shinyUI(dashboardPage(skin = "purple",
dashboardHeader(title = "Brazilian Deputies Expenditure", titleWidth = "auto"),
dashboardSidebar(
sidebarUserPanel("Heloisa",
image = "eu.jpg"),
sidebarMenu(
menuItem("Map", tabName = "map", icon = icon("map")),
menuItem("Political party", tabName = "party", icon = icon("building")),
menuItem("Deputy name", tabName = "deputy", icon = icon("user")),
menuItem("Data", tabName = "data", icon = icon("database"))
)),
dashboardBody(
tabItems(
tabItem(tabName = "map",
fluidRow(infoBoxOutput("maxBox"),
infoBoxOutput("minBox"),
infoBoxOutput("avgBox")),
# mapa
selectInput("estado", fluidRow(box(htmlOutput("map"), height = 300))),
?selectInput()
fluidRow(shiny::column(4, offset = 8, sliderInput("year_map", "Year",
min = min(year), max = max(year),
value = min(year), step = 1, animate = TRUE)))
),
# gráfico de bolhas
tabItem(tabName = "party",
fluidRow(box(htmlOutput("bolhas"), height = 300, width = 12)),
selectizeInput("year_party",
"Select Item to Display",
year)
),
tabItem(tabName = "data",
# datatable
fluidRow(box(DT::dataTableOutput("table"),
width = 12)))
)
)
))
?selectInput()
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
?htmlOutput()
?eventReactive()
?eventReactive()
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
?htmlOutput
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
?clickOpts
htmlOutput()
?htmlOutput
?plotOutput
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
install.packages("htmlwidgets")
install.packages("htmlwidgets")
install.packages("devtools")
library(htmlwidgets)
library(devtools)
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
View(estados)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(receipt_value)) %>%
ggplot(., aes(x = year, y = total_spending, fill = receipt_description)) + geom_col()
source('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/Projeto Data Visualization - Deputados v3.R', echo=TRUE)
install.packages("devtools")
# TESTE
reembolsos = read.csv("deputados_agrup.csv")
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(receipt_value)) %>%
ggplot(., aes(x = year, y = total_spending, fill = receipt_description)) + geom_col()
source('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/Projeto Data Visualization - Deputados v3.R', echo=TRUE)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
ggplot(., aes(x = year, y = total_spending, fill = receipt_description)) + geom_col()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
ggplot(., aes(x = year, y = total_spending)) + geom_point(fill = receipt_description) + geom_line()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
ggplot(., aes(x = year, y = total_spending)) + geom_point(fill = receipt_description) + geom_line()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
ggplot(., aes(x = year, y = total_spending)) + geom_point(aes(color = receipt_description)) + geom_line()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
ggplot(., aes(x = year, y = total_spending)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
# ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description))
gvisColumnChart(., xvar = year, yvar = "total_spending", options = list(isStacked = T))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
# ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description))
gvisColumnChart(., xvar = "year", yvar = "total_spending", options = list(isStacked = T))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
# ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description))
gvisColumnChart(., xvar = "year", yvar = "total_spending", options = list(isStacked = T)) %>%
plot(.)
install.packages("plotly")
library(plotly)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) %>%
plotly(.)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) %>%
ggplotly(.)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description))
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_excel()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + scale_fill_brewer(palette = "Pastel1") + theme_excel()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + scale_fill_brewer(palette = "Set3") + theme_excel()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + scale_fill_brewer(palette = "Set3" + "red") + theme_excel()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + scale_fill_brewer(palette = "Set3" & "red") + theme_excel()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + scale_fill_brewer(palette = c("Set3", "red")) + theme_excel()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + scale_fill_brewer(palette = "Set3") + theme_excel()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_excel() + scale_fill_excel()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() + scale_fill_few()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() + scale_fill_brewer(13)
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() + scale_fill_brewer()
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = getPalette(colourCount))
library(scales)
install.packages("scales")
install.packages("scales")
library(scales)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Accent"))(colourCount),
guide = guide_legend(nrow=2))
library(RColorBrewer)
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer_pal('Pastel1'))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer_pal('Pastel1')))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer_pal('Pastel1')))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer_pal('Pastel1')))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Accent"))(colourCount),
guide = guide_legend(nrow=2))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Accent")),
guide = guide_legend(nrow=2))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(13, "Accent")))
ggplotly()
brewer_pal()
brewer.pal(8, "Set1")
colorRampPalette(brewer.pal(8, "Set1"))
colorRampPalette(brewer.pal(8, "Set1"))
colorRampPalette(brewer.pal(8, "Set1"))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Accent")))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(olorRampPalette(brewer.pal(8, "Accent")))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(colorRampPalette(brewer.pal(8, "Accent")))
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Accent")))
ggplotly()
colorRampPalette(brewer.pal(8, "Set1"))(13)
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Set1"))(13))
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Pastel1"))(13))
ggplotly()
# POR DEPUTADO
filter(reembolsos, deputy_name == "Jair Bolsonaro") %>%
group_by(., year, receipt_description) %>%
summarise(., total_spending = sum(value_receipts), max_receipt = max(value_receipts)) %>%
#  ggplot(., aes(x = year, y = total_spending, ymax = max_receipt)) + geom_point(aes(color = receipt_description)) + geom_path(aes(color = receipt_description))
ggplot(., aes(x = year, y = total_spending)) + geom_col(aes(fill = receipt_description)) + theme_few() +  scale_fill_manual(values = colorRampPalette(brewer.pal(8, "Pastel1"))(13)) + ylab("Average expenditure per category")
ggplotly()
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
?theme_few()
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
# Arquivo # ------------------------------------------------------------------------------------------------------------------------------
setwd("/Users/heloisadutcosky/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1/data")
reembolsos = read.csv("deputados_agrup.csv")
reembolsos
# listas ---------------------------------------------------------------------------------------------------------------------------------
br_states = unique(reembolsos$state_code) #ESTADOS
year = unique(reembolsos$year) #ANOS
reembolsos$political_party = gsub("S.PART.", "SEM PARTIDO", reembolsos$political_party, fixed = T) %>%
gsub("SEM PARTIDO ASSOCIADO", "SEM PARTIDO", ., fixed = T)
parties = unique(reembolsos$political_party) #PARTIDO
deputados = unique(reembolsos$deputy_name) #PARTIDO
deputados
# gasto por deputado ---------------------------------------------------------------------------------------------------------------------
gastos_por_deputado = group_by(reembolsos, year, deputy_name, political_party) %>%
summarise(., deputados_gpa = sum(value_receipts))
#agrupamento por partido ----------------------------------------------------------------------------------------------------------------
gastos_por_partido = group_by(reembolsos, year, political_party) %>%
summarise(., partido_mgpd = sum(value_receipts)/n_distinct(deputy_name), n_deputados = n_distinct(deputy_name))
max_por_partido = group_by(gastos_por_deputado, year, political_party) %>%
summarise(., partido_maxgpd = max(deputados_gpa))
partidos = left_join(gastos_por_partido, max_por_partido, by = c("year", "political_party"))
#agrupamento por partido ----------------------------------------------------------------------------------------------------------------
estados = filter(reembolsos, state_code != "Vazio") %>%
group_by(., year, state_code) %>%
summarise(., estado_mgpd = sum(value_receipts) / n_distinct(deputy_name), n_deputados_estado = n_distinct(deputy_name)) %>%
mutate(., codUF = paste0("BR-", state_code))
runApp('~/Documents/NYC Data Science Academy/Projeto 1 - Data Visualization com R/deputados_v1')
